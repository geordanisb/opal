// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import csv from 'csvtojson'

const density_subscriber=`date,district_in,density,subscribers,
2020,53,762.528301886792,230023.811320755,
2020,19,818.169811320755,276136.245283019,
2020,21,741.150943396226,274107.509433962,
2020,6,743.685794596226,286324.320754717,
2020,48,871.528301886792,250829.509433962,
2021,53,850.423076923077,235749.769230769,
2021,19,823.019230769231,257523.173076923,
2021,21,930.961538461538,266660.692307692,
2021,6,761.403846153846,258654.692307692,
2021,48,794.692307692308,244754.153846154,
2022,53,797.340909090909,266982.886363636,
2022,19,888.068181818182,268224.363636364,
2022,21,852.931818181818,206303,
2022,6,841.613636363636,270211.340909091,
2022,48,794.692307692308,244754.153846154,`;

const mobility_events = `date,district_in,district_out,sms_in ,sms_out ,call_in,call_out ,movement ,average_call_duration
2020,53,53,7194239519,6677571181,580896149,564460032,256.88679245283,424.622641509434
2020,53,19,6196513395,6462650769,512395205,531978745,283.283018867925,458.943396226415
2020,53,21,5963968555,6571071622,570679115,512944390,210.905660377358,465.415094339623
2020,53,6,6779035504,6670565553,508610026,540765829,242.584905660377,475.396226415094
2020,53,48,6939394090,5721014973,541242192,470902219,207.358490566038,447.528301886793
2020,19,53,6510098078,6334086022,518263520,519073398,249.849056603774,448.415094339623
2020,19,19,6864162381,7334550421,571798110,575765835,274.056603773585,515.698113207547
2020,19,21,6287963279,5895964533,567740109,476143553,226.245283018868,415.584905660377
2020,19,6,6960176763,7180845656,507709847,525248355,255.924528301887,447.716981132075
2020,19,48,7072734989,6733489270,567479365,420719282,230.641509433962,473.943396226415
2020,21,53,7204433489,7041764483,468497040,524414444,242.415094339623,419.905660377359
2020,21,19,7137207494,6450082895,537672603,397548524,226.924528301887,374.094339622641
2020,21,21,6165388171,7092653526,538872869,510641333,250.132075471698,462.528301886793
2020,21,6,6524434465,6768527569,564030365,546316704,249.849056603774,473.924528301887
2020,21,48,6606879365,6886521420,618644101,445584624,271.698113207547,478.716981132075
2020,6,53,6709733409,6717076548,533128316,469158722,209.245283018868,508.377358490566
2020,6,19,6873673886,5867395654,519737369,538720828,259.245283018868,505.433962264151
2020,6,21,5344527274,6166578900,496065980,567343523,253.811320754717,424.77358490566
2020,6,6,7952353702,5483250199,498627451,494597299,270.245283018868,443.528301886793
2020,6,48,6441379446,6317271416,503290356,535509381,241.735849056604,437.905660377359
2020,48,53,6364956341,7046301014,564888986,500395831,256.433962264151,441.339622641509
2020,48,19,6858443621,5635365604,578544554,551083860,279.433962264151,427.433962264151
2020,48,21,6475488846,6925298484,551191340,491180695,252.905660377358,392.094339622641
2020,48,6,6755941719,7255038319,518824551,505200797,258.433962264151,492.849056603774
2020,48,48,6739167771,7000711029,514959559,567279424,276.377358490566,468.547169811321
2021,53,53,6921124084,6215972585,502722262,463775329,264.269230769231,428.288461538461
2021,53,19,7411058027,7062921168,503006797,488947750,270.480769230769,447.980769230769
2021,53,21,6198007079,5769860569,542001087,489362504,250,409.423076923077
2021,53,6,5963995056,6656342697,555411489,578623547,222.519230769231,435.884615384615
2021,53,48,6425040158,6529472483,526331803,518617117,221.653846153846,430.173076923077
2021,19,53,6648155318,7371353369,573629382,555633935,237.019230769231,474.711538461539
2021,19,19,5685776901,6760209877,497705273,558057462,258.615384615385,371.076923076923
2021,19,21,6485352766,7695581007,518489662,527410420,273.5,423.192307692308
2021,19,6,6503021993,7391327249,537800347,529380878,238.153846153846,480.307692307692
2021,19,48,5930702552,6555884774,491155411,498641635,254.653846153846,481.711538461539
2021,21,53,7397953741,6527842487,556144228,492998878,257.211538461539,416.807692307692
2021,21,19,6823527231,7783388984,596574404,550859386,245.692307692308,444.5
2021,21,21,7298921177,6391392808,433026225,515471948,237.75,461.711538461539
2021,21,6,6696283284,5245482426,622784522,524777608,227.884615384615,406.211538461539
2021,21,48,5849398601,6502926643,524001432,530739550,253.096153846154,463.615384615385
2021,6,53,6144499248,6250991853,545013073,499242892,233.846153846154,409.673076923077
2021,6,19,7540935500,6291066961,512837210,467343929,235.615384615385,451.269230769231
2021,6,21,6296280346,6990664473,544712891,573072954,228.115384615385,382.673076923077
2021,6,6,6295920320,6502778352,595431388,556333441,243.096153846154,417.461538461539
2021,6,48,6185869222,5558422285,515582761,590645757,246.192307692308,387.173076923077
2021,48,53,6775919679,6461491493,499663737,492902557,251.673076923077,412.903846153846
2021,48,19,6480624436,8075264669,581906250,490476244,213.538461538461,401.038461538461
2021,48,21,6399224317,6242549558,468901243,475367236,282.019230769231,502.807692307692
2021,48,6,5418945973,7314535055,504053170,452966365,256.826923076923,443.596153846154
2021,48,48,6903477348,6268121582,535546905,542415400,260.730769230769,489.038461538461
2022,53,53,6058448536,5130393049,498524238,425842149,245.045454545455,433.295454545455
2022,53,19,5789263403,5612404731,403148578,469725651,254.977272727273,432.227272727273
2022,53,21,5341833977,5266985060,407587367,457436674,263.136363636364,465.363636363636
2022,53,6,5351815449,5614240583,492838967,401787437,205.227272727273,401.363636363636
2022,53,48,6270535152,5842324134,446834193,410725888,257.204545454545,418.772727272727
2022,19,53,4611354617,5784453957,448463383,443820287,297.636363636364,482.590909090909
2022,19,19,5842759053,4663546205,349739347,428734834,257.386363636364,512.954545454545
2022,19,21,5690457340,6087814452,416301422,515066115,285.340909090909,484.704545454545
2022,19,6,5574332934,6169817863,385331052,415009228,247.136363636364,509.659090909091
2022,19,48,5819293052,6330719524,516972629,464539533,266.590909090909,379.795454545455
2022,21,53,5578855645,4399592418,415274178,417147641,255.363636363636,396.409090909091
2022,21,19,5150312176,5653011288,503507507,488951188,228.181818181818,481.318181818182
2022,21,21,6480967060,6145733531,474768052,462663440,279.795454545455,464.477272727273
2022,21,6,6084720814,5620205412,415685963,408041938,280.954545454545,506.772727272727
2022,21,48,5812665647,5924523253,449883894,400262151,261.613636363636,448.25
2022,6,53,5688222172,5037882849,394816850,480051558,261.25,405.159090909091
2022,6,19,5079843725,5538141750,451179966,373514159,283.340909090909,364.295454545455
2022,6,21,6236222434,5409797413,477220108,387636843,281.795454545455,456.181818181818
2022,6,6,4752890253,5272495577,454114748,383664616,195.909090909091,505.613636363636
2022,6,48,4878712622,4829430848,395774976,455594448,250.113636363636,488.681818181818
2022,48,53,5225046285,4775758856,429624327,391823170,266.522727272727,378.363636363636
2022,48,19,5260934584,4870249026,459190978,420337225,252.113636363636,489.409090909091
2022,48,21,6146544844,6077129103,386054107,484790899,261.454545454545,425.181818181818
2022,48,6,6056753131,5608391098,439142091,463281321,255.045454545455,500.340909090909
2022,48,48,5491277735,5755916669,372732494,393641332,228.5,452.363636363636`

export default async function Index(req, res) {debugger;
  const {topic} = req.query;
  let data = []
  switch(topic){
    case 'density_subscriber':
      data = await csv().fromString(density_subscriber)
      break;
    case  'mobility_events':
      data = await csv().fromString(mobility_events)
      break;
  }
  res.status(200).json({ data, count:data.length })
}
